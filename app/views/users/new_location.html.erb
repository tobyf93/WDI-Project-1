<style type="text/css">
html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}

form {
  z-index: 999999;
}
</style>

<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: { lat: -33.76281, lng: 151.298816},
      zoom: 15
    };

    var map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);

    // Markers
    var marker = new google.maps.Marker({
      position: { lat: -33.76281, lng: 151.298816},
      draggable: true,
      map: map
    });

    circle = new google.maps.Circle({
            map: map,
            clickable: false,
            radius: 100,
            fillColor: '#fff',
            fillOpacity: 0.6,
            strokeColor: '#313131',
            strokeOpacity: 0.4,
            strokeWeight: 0.8
        });

    // attach circle to marker
    circle.bindTo('center', marker, 'position');

    google.maps.event.addListener(marker, 'drag', function() {
      var markerPos = marker.getPosition();
      $('#latitude').val(markerPos.A);
      $('#longitude').val(markerPos.F);
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script>

<%= form_tag do %>
  <%= label_tag :latitude %>
  <%= text_field_tag :latitude %>

  <%= label_tag :longitude %>
  <%= text_field_tag :longitude %>

  <%= submit_tag 'Set Location' %>
<% end %>
<div id="map-canvas">
</div>